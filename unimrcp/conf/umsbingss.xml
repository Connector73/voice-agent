<?xml version="1.0" encoding="UTF-8"?>
<!--
 *  Description: Configuration of the Microsoft Bing Speech Synthesis (BingSS) plugin to the UniMRCP server (UMS)
 *  Vendor: Universal Speech Solutions LLC
 *  Author: arsen.chaloyan@unimrcp.org
-->

<!-- UMS BingSS Document
   Attributes:
   *  license-file
      This parameter specifies the license file to use. File name may include patterns containing a '*' sign.
      If multiple files match the pattern, the most recent one gets used.
   *  subscription-key-file
      This parameter specifies a path to the file containing a Microsoft API key to use. File name may include patterns containing a '*' sign.
      If multiple files match the pattern, the most recent one gets used.
   Elements:
   *  license-server
      This element specifies parameters of the license server. The use of license server is optional.
   *  synth-settings
      This element specifies synthesis parameters.
   *  waveform-manager
      This element specifies parameters of the waveform manager.
   *  sdr-manager
      This element specifies parameters of the Synthesis Details Record (RDR) manager.
   *  monitoring-agent
      This element specifies parameters of the monitoring agent.
-->
<umsbingss license-file="umsbingss_*.lic" subscription-key-file="cognitive.subscription.key">

   <!-- License Server Configuration
   Attributes:
   *  enable
      This is a boolean parameter indicating whether the license server is enabled or disabled.
      If the license server is enabled, the license-file attribute is not honored.
   *  server-address
      This parameter specifies the IP address or host name of the license server.
   *  certificate-file
      This parameter specifies the client certificate used to connect to the license server. File name may include patterns containing a '*' sign.
      If multiple files match the pattern, the most recent one gets used.
   *  ca-file
      This parameter specifies the certificate authority used to validate the license server.
   Elements:
   *  none
   -->
   <license-server
      enable="false"
      server-address="127.0.0.1"
      certificate-file="unilic_client_*.crt"
      ca-file="unilic_ca.crt"
   />

   <!-- Synthesis Settings
   Attributes:
   *  language
      This parameter specifies the default language to use. Can be overridden by client.
      See the supported languages: https://docs.microsoft.com/en-us/azure/cognitive-services/speech/api-reference-rest/supportedlanguages
   *  voice-name
      This parameter specifies the default voice name. Can be overridden by client.
   *  voice-gender
      This parameter specifies the default voice gender. Can be overridden by client.
   *  bypass-ssml
      This parameter specifies whether transparently bypass or normalize received SSML content before sending it to Bing speech service for synthesis.
   *  auth-validation-period
      This parameter specifies a period in seconds used to re-validate access token based on subscription key. The lifetime of retrieved access token is set to 10 min by Microsoft.
   Elements:
   *  none
   -->
   <synth-settings
      language="en-US"
      voice-name=""
      voice-gender=""
      bypass-ssml="false"
      auth-validation-period="480"
   />

   <!-- Waveform Manager
   Attributes:
   *  save-waveforms
      This parameter specifies whether to save waveforms or not.
   *  purge-existing
      This parameter specifies whether to delete existing waveforms on start-up.
   *  max-file-age
      This parameter specifies a time interval in minutes after expiration of which a waveform is deleted. Set 0 for infinite.
   *  max-file-count
      This parameter specifies the max number of waveforms to store. If reached, the oldest waveform is deleted. Set 0 for infinite.
   *  waveform-folder
      This parameter specifies a folder the waveforms are stored in. Defaults to ${UniMRCPInstallDir}/var.
   Elements:
   *  none
   -->
   <waveform-manager
      save-waveforms="false"
      purge-existing="false"
      max-file-age="60"
      max-file-count="100"
      waveform-folder=""
   />

   <!-- Synthesis Details Record (SDR) Manager
   Attributes:
   *  save-records
      This parameter specifies whether to save synthesis details records or not.
   *  purge-existing
      This parameter specifies whether to delete existing records on start-up.
   *  max-file-age
      This parameter specifies a time interval in minutes after expiration of which a record is deleted. Set 0 for infinite.
   *  max-file-count
      This parameter specifies the max number of records to store. If reached, the oldest record is deleted. Set 0 for infinite.
   *  record-folder
      This parameter specifies a folder to store synthesis details records in. Defaults to ${UniMRCPInstallDir}/var.
   Elements:
   *  none
   -->
   <sdr-manager
      save-records="false"
      purge-existing="false"
      max-file-age="60"
      max-file-count="100"
      record-folder=""
   />

   <!-- Monitoring Agent
   Attributes:
   *  refresh-period
      This parameter specifies a time interval in seconds used to periodically refresh usage details. See <usage-refresh-handler>.
   Elements:
   *  usage-change-handler
   *  usage-refresh-handler
   -->
   <monitoring-agent refresh-period="60">
      <!-- Handler of usage change event
      Attributes:
      *  none
      Elements:
      *  log-usage
      *  update-usage
      *  dump-channels
      -->
      <usage-change-handler>
         <log-usage enable="true" priority="NOTICE"/>
         <update-usage enable="false" status-file="umsbingss-usage.status"/>
         <dump-channels enable="false" status-file="umsbingss-channels.status"/>
      </usage-change-handler>

      <!-- Handler of usage refresh timeout
      Attributes:
      *  none
      Elements:
      *  log-usage
      *  update-usage
      *  dump-channels
      -->
      <usage-refresh-handler>
         <log-usage enable="false" priority="NOTICE"/>
         <update-usage enable="false" status-file="umsbingss-usage.status"/>
         <dump-channels enable="false" status-file="umsbingss-channels.status"/>
      </usage-refresh-handler >
   </monitoring-agent>

</umsbingss>
